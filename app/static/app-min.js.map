{"version":3,"sources":["js/dev/currency.js","js/dev/filter.js","js/dev/menu.js","js/dev/destination_list_hover.js","js/dev/page_add-destination.js","js/dev/index_thumbnails_polyfill.js"],"names":["currency","onReady","fromCookie","$","change","onSelectChange","getJSON","$SCRIPT_ROOT","c","this","val","data","each","newMoney","text","rate","newMoneyRounded","Math","round","html","new_currency","undefined","Cookies","get","rateFromEuro","document","ready","filterBarMobile","click","toggleMobileFilter","mainDisciplineSelectToButtons","costSelectToButtons","mainDisciplineChange","costChange","toggle","mouseup","e","filterButton","container","is","target","has","length","removeClass","hide","selectName","attr","hidden","insertAfter","unwrap","btn","addClass","replaceWith","toLowerCase","filterBarDesktop","event","stopPropagation","not","children","toggleClass","hasClass","parents","parent","window","onclick","matches","i","dropdowns","getElementsByClassName","openDropdown","classList","contains","remove","filterLoad","loadDestinations","changeAscDesc","on","desktopDataFromFilter","desktopJsonData","dataOrder","order","dataSortBy","sort_by","dataCost","cost","dataAccomodation","push","accomodation","dataMainDiscipline","main_discipline","dataSecondaryDiscipline","secondary_discipline","dataMonths","months","dataCar","car","mobileDataFromFilter","mobileJsonData","changeUrl","jsonData","url","param","history","pushState","from","console","log","jsonDataAsString","JSON","stringify","load","menu","destinationHover","hover","find","selectIntoButtons","init","documentElement","style","imageSource","querySelector","src","display","backgroundSize","backgroundImage","backgroundPosition"],"mappings":"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","sourcesContent":["/* global $SCRIPT_ROOT, Cookies */\n/* -------------------------------------------------------------------------\n-------\n-------   Currency Feature\n-------   - Change currency when page loads (from cookie), and when\n-------   someone changes the currency select form in filter bar.\n-------\n---------------------------------------------------------------------------- */\n\nvar currency = {\n\n  onReady: function () {\n\n    // When page loads\n    currency.fromCookie()\n\n    // When changing currency manually in select field\n    $('select#currency').change(currency.onSelectChange)\n  },\n\n  onSelectChange: function () {\n    $.getJSON($SCRIPT_ROOT + '/_convert_currency', {\n      c: $(this).val()\n    }, function (data) {\n\n      $('span.money').each(function () {\n        var money = $(this).text()\n        var newMoney = money * data.rate\n        var newMoneyRounded = Math.round(newMoney)\n        $(this).text(newMoneyRounded)\n      })\n      $('span.currency').html(data.new_currency)\n    })\n    return false\n  },\n\n  fromCookie: function () {\n    if (Cookies.get('currency') !== undefined && Cookies.get('currency') !== 'EUR') {\n\n      var currency = Cookies.get('currency')\n      var rateFromEuro = Cookies.get('rate_from_euro')\n\n      if (rateFromEuro !== 1) {\n\n        // takes info from cookie and makes the current currency\n        // selected in the select#currency list:\n        $('select#currency').val(currency)\n\n        // change from euro to current currency when refreshing:\n        $('span.money').each(function () {\n          var money = $(this).text()\n          var newMoney = money * rateFromEuro\n          var newMoneyRounded = Math.round(newMoney)\n          $(this).text(newMoneyRounded)\n        })\n\n        $('span.currency').html(currency)\n      }\n    }\n  }\n\n}\n$(document).ready(currency.onReady)\n","/* global $SCRIPT_ROOT:true currency:true */\n/* -------------------------------------------------------------------------\n-------\n-------   Filterbar Features\n-------\n-------   - filterBarMobile\n-------     * Show/hides filter container for mobile\n-------     * Turn main discipline <Select> into Buttons\n-------\n-------   - filterBarDesktop\n-------     * Making dropdowns work\n-------\n-------   - filterLoad\n-------     * Triggers loadDestinations for all filter submits\n-------     * Changes arrows on ASC/DESC\n-------     * loadDestinations\n-------\n---------------------------------------------------------------------------- */\n\n// For the filter box that appears when clicking \"filter\" on mobile\nvar filterBarMobile = {\n  onReady: function () {\n\n    // Mobile button (visible only on mobile) - Toggles the filter container\n    $('.js-mobile-filters-toggle').click(filterBarMobile.toggleMobileFilter)\n\n    // Select to buttons\n    filterBarMobile.mainDisciplineSelectToButtons()\n    filterBarMobile.costSelectToButtons()\n\n    $('.js-filter-main-discipline--btn').click(filterBarMobile.mainDisciplineChange)\n    $('.js-filter-mobile-cost-button').click(filterBarMobile.costChange)\n\n    // When clicking the submit (\"GO\") button within filter container\n    $('.js-filter-mobile-submit').click(function () {\n      $('.js-mobile-filters-container').toggle()\n    })\n\n    // Hide filter container if clicking outside of it\n    $(document).mouseup(function (e) {\n\n      var filterButton = $('.js-mobile-filters-toggle')\n      var container = $('.js-mobile-filters-container')\n      // if the target of the click isn't the container nor a descendant of the container\n      if (!container.is(e.target) && container.has(e.target).length === 0 && !filterButton.is(e.target)) {\n\n        container.removeClass('show')\n        $('.js-mobile-filters-container').hide()\n\n      }\n\n    })\n\n  },\n\n  toggleMobileFilter: function () {\n\n    $('.js-mobile-filters-container').toggle()\n\n  },\n\n  costSelectToButtons: function () {\n\n    var selectName = $('select.js-filter-mobile-cost').attr('name')\n\n    var hidden = $('<input type=\"hidden\" class=\"js-hidden-mobile-cost-value\" name=\"' + selectName + '\">')\n    hidden.val($('select.js-filter-mobile-cost').val())\n    hidden.insertAfter($('select.js-filter-mobile-cost'))\n\n    $('select.js-filter-mobile-cost option').unwrap().each(function () {\n\n      var btn = $('<div data-cost-value=\"' + $(this).val() + '\" class=\"filter-mobile-select-button js-filter-mobile-cost-button\">' + $(this).text() + '</div>')\n      if ($(this).val() === $('.js-hidden-mobile-cost-value').val()) {\n\n        btn.addClass('on')\n\n      }\n\n      $(this).replaceWith(btn)\n\n    })\n\n  },\n\n  mainDisciplineSelectToButtons: function () {\n\n    // Main discipline: Turning <SELECT> into <BUTTONS>\n    var selectName = $('select.filter-main-discipline--select').attr('name')\n\n    // add a hidden element with the same name as the select\n    var hidden = $('<input type=\"hidden\" class=\"js-hidden-main-discipline-value\" name=\"' + selectName + '\">')\n    hidden.val($('select.filter-main-discipline--select').val())\n    hidden.insertAfter($('select.filter-main-discipline--select'))\n\n    $('select.filter-main-discipline--select option').unwrap().each(function () {\n\n      var btn = $('<div data-main-discipline-value=\"' + $(this).val() + '\" class=\"filter-mobile-select-button js-filter-main-discipline--btn\">' + $(this).text() + '</div>')\n      if ($(this).val() === $('.js-hidden-main-discipline-value').val()) {\n\n        btn.addClass('on')\n\n      }\n\n      $(this).replaceWith(btn)\n\n    })\n\n  },\n\n  costChange: function () {\n    $('.js-filter-mobile-cost-button').removeClass('on')\n    $(this).addClass('on')\n    $('input.js-hidden-mobile-cost-value').val($(this).attr('data-cost-value').toLowerCase())\n  },\n\n  mainDisciplineChange: function () {\n    $('.js-filter-main-discipline--btn').removeClass('on')\n    $(this).addClass('on')\n    $('input.js-hidden-main-discipline-value').val($(this).attr('data-main-discipline-value').toLowerCase())\n  }\n\n}\n$(document).ready(filterBarMobile.onReady)\n\n// For filter buttons that shows on desktop\nvar filterBarDesktop = {\n\n  onReady: function () {\n\n    // Stoppoing parent from being \"clicked\" and executing .click() stuff when clicking child\n    $('.dropdown-content').click(function (event) {\n\n      event.stopPropagation()\n\n    })\n\n    // When the user clicks on a filter button (cost/accomodation/..),\n    // toggle between hiding and showing the dropdown content\n    // + hide all other dropdowns\n    $('.js-filter-button-dropdown').click(function () {\n\n      $('.dropdown-content').not($(this).children('.dropdown-content')).removeClass('show')\n      $('.js-filter-button-dropdown').not($(this)).removeClass('active')\n      $(this).children('.dropdown-content').toggleClass('show')\n\n      if (!$('.destinations-list-container').hasClass('opacity')) {\n\n        $('.destinations-list-container').addClass('opacity')\n\n      }\n\n      if ($(this).hasClass('active')) {\n\n        $('.destinations-list-container').removeClass('opacity')\n\n      }\n\n      $(this).toggleClass('active')\n\n    })\n\n    $('.js-filter-desktop-submit').click(function () {\n      $('.destinations-list-container').removeClass('opacity')\n      $(this).parents('.js-filter-button-dropdown').removeClass('active')\n      $(this).parent('div.dropdown-content').removeClass('show')\n    })\n\n    // Hide filter dropdowns when clicking outside the dropdown window\n    window.onclick = function (event) {\n\n      if (!event.target.matches('.js-filter-button-dropdown, .dropdown-content, .js-menu-dashboard-link')) {\n\n        $('.destinations-list-container').removeClass('opacity')\n        $('.js-filter-button-dropdown').removeClass('active')\n\n        var dropdowns = document.getElementsByClassName('dropdown-content')\n        var i\n        for (i = 0; i < dropdowns.length; i++) {\n\n          var openDropdown = dropdowns[i]\n          if (openDropdown.classList.contains('show')) {\n\n            openDropdown.classList.remove('show')\n\n          }\n\n        }\n\n      }\n\n    }\n\n  }\n\n}\n$(document).ready(filterBarDesktop.onReady)\n\n// For loading destinations when filters are changed\nvar filterLoad = {\n\n  // When clicking GO or changing something that loads destinations\n  onReady: function () {\n\n    // ---- DESKTOP\n    // When changing \"sort by\" - load destinations\n    $('select.js-desktop-sort-by').change(function () {\n      filterLoad.loadDestinations('desktop')\n    })\n\n    // When changing \"Asc/Desc\" - swich arrow and load destinations\n    $('.js-desktop-sortby-asc-desc').click(function () {\n      filterLoad.changeAscDesc(event)\n      filterLoad.loadDestinations('desktop')\n    })\n\n    // When changing  cost (<200e etc.)\n    $('select.js-filter-desktop-cost').change(function () {\n      filterLoad.loadDestinations('desktop')\n    })\n\n    // Submitting a desktop submit button\n    $('.js-filter-desktop-submit').on('click', function () {\n      filterLoad.loadDestinations('desktop')\n    })\n\n    // ---- MOBILE\n\n    // When changing \"sort by\" - load destinations\n    $('select.js-mobile-sort-by').change(function () {\n      filterLoad.loadDestinations('mobile')\n    })\n\n    // When changing \"Asc/Desc\" - swich arrow and load destinations\n    $('.js-mobile-sortby-asc-desc').click(function () {\n      filterLoad.changeAscDesc(event)\n      filterLoad.loadDestinations('mobile')\n    })\n\n    // Submitting GO button in mobile filter container\n    $('.js-filter-mobile-submit').on('click', function () {\n      filterLoad.loadDestinations('mobile')\n    })\n\n  },\n\n  changeAscDesc: function (event) {\n\n    var e = $(event.target)\n\n    e.toggleClass('js-asc')\n    e.toggleClass('js-desc')\n    if (e.html() === '\\u2191') {\n\n      e.text('\\u2193')\n\n    } else if (e.html() === '\\u2193') {\n\n      e.text('\\u2191')\n\n    }\n\n  },\n\n  get desktopDataFromFilter () {\n\n    var desktopJsonData = {}\n\n    // Order\n    if ($('.js-desktop-sortby-asc-desc').is('.js-asc')) {\n      var dataOrder = 'ASC'\n    } else {\n      dataOrder = 'DESC'\n    }\n\n    desktopJsonData.order = dataOrder\n\n    // Sort By (SELECT)\n    var dataSortBy = $('select.js-desktop-sort-by').val()\n    desktopJsonData.sort_by = dataSortBy\n\n    // Cost (SELECT)\n    var dataCost = $('select.js-filter-desktop-cost').val()\n    if (dataCost !== 'any') {\n      desktopJsonData.cost = dataCost\n    }\n\n    // Accomodation (CHECKBOXES)\n    var dataAccomodation = []\n    $('input.js-filter-desktop-accomodation-checkbox').each(function () {\n      if ($(this).is(':checked')) {\n        dataAccomodation.push($(this).val())\n      }\n    })\n    if (dataAccomodation.length > 0) {\n      desktopJsonData.accomodation = dataAccomodation\n    }\n\n    // Discipline (SELECT AND CHECKBOXES)\n    var dataMainDiscipline = $('select.js-filter-desktop-main-discipline').val()\n    if (dataMainDiscipline !== 'any') {\n      desktopJsonData.main_discipline = dataMainDiscipline\n    }\n\n    var dataSecondaryDiscipline = []\n\n    $('input.js-filter-desktop-second-discipline-checkbox').each(function () {\n      if ($(this).is(':checked')) {\n        dataSecondaryDiscipline.push($(this).val())\n      }\n    })\n    if (dataSecondaryDiscipline.length > 0) {\n      desktopJsonData.secondary_discipline = dataSecondaryDiscipline\n    }\n\n    // Months (CHECKBOXES)\n    var dataMonths = []\n\n    $('input.js-filter-desktop-months-checkbox').each(function () {\n      if ($(this).is(':checked')) {\n        dataMonths.push($(this).val())\n      }\n    })\n    if (dataMonths.length > 0) {\n      desktopJsonData.months = dataMonths\n    }\n\n    // Car (CHECKBOXES)\n    var dataCar = []\n\n    $('input.js-filter-desktop-car-checkbox').each(function () {\n      if ($(this).is(':checked')) {\n        dataCar.push($(this).val())\n      }\n    })\n    if (dataCar.length > 0) {\n      desktopJsonData.car = dataCar\n    }\n\n    // ALL DATA TOGETHER\n    /*\n    desktopJsonData = {\n      order: dataOrder,\n      sort_by: dataSortBy,\n      cost: dataCost,\n      accomodation: dataAccomodation,\n      main_discipline: dataMainDiscipline,\n      secondary_discipline: dataSecondaryDiscipline,\n      months: dataMonths,\n      car: dataCar\n    } */\n\n    return desktopJsonData\n\n  },\n\n  get mobileDataFromFilter () {\n\n    var mobileJsonData = {}\n\n    // Order\n    if ($('.js-mobile-sortby-asc-desc').is('.js-asc')) {\n      var dataOrder = 'ASC'\n    } else {\n      dataOrder = 'DESC'\n    }\n    mobileJsonData.order = dataOrder\n\n    // Sort By (SELECT)\n    var dataSortBy = $('select.js-mobile-sort-by').val()\n    mobileJsonData.sort_by = dataSortBy\n\n    // Cost (BUTTONS)\n    var dataCost = $('input.js-hidden-mobile-cost-value').val()\n    if (dataCost !== 'any') {\n      mobileJsonData.cost = dataCost\n    }\n\n    // Accomodation (CHECKBOXES)\n    var dataAccomodation = []\n    $('input.js-filter-mobile-accomodation-checkbox').each(function () {\n      if ($(this).is(':checked')) {\n        dataAccomodation.push($(this).val())\n      }\n    })\n    if (dataAccomodation.length > 0) {\n      mobileJsonData.accomodation = dataAccomodation\n    }\n\n    // Discipline (BUTTONS and CHECKBOXES)\n    var dataMainDiscipline = $('input.js-hidden-main-discipline-value').val()\n    if (dataMainDiscipline !== 'any') {\n      mobileJsonData.main_discipline = dataMainDiscipline\n    }\n\n    var dataSecondaryDiscipline = []\n\n    $('input.js-filter-mobile-second-discipline-checkbox').each(function () {\n      if ($(this).is(':checked')) {\n        dataSecondaryDiscipline.push($(this).val())\n      }\n    })\n    if (dataSecondaryDiscipline.length > 0) {\n      mobileJsonData.secondary_discipline = dataSecondaryDiscipline\n    }\n\n    // Months (CHECKBOXES)\n    var dataMonths = []\n\n    $('input.js-filter-mobile-months-checkbox').each(function () {\n      if ($(this).is(':checked')) {\n        dataMonths.push($(this).val())\n      }\n    })\n    if (dataMonths.length > 0) {\n      mobileJsonData.months = dataMonths\n    }\n\n    // Car (CHECKBOXES)\n    var dataCar = []\n\n    $('input.js-filter-mobile-car-checkbox').each(function () {\n      if ($(this).is(':checked')) {\n        dataCar.push($(this).val())\n      }\n    })\n    if (dataCar.length > 0) {\n      mobileJsonData.car = dataCar\n    }\n\n    return mobileJsonData\n\n  },\n\n  // Change URL with history API\n  changeUrl: function (jsonData) {\n    var url = '?' + $.param(jsonData)\n    history.pushState(null, null, url)\n  },\n\n  // AJAX CALL WITH .load(URL,data,callback)\n  loadDestinations: function (from) {\n\n    if (from === 'desktop') {\n      var jsonData = filterLoad.desktopDataFromFilter\n    } else if (from === 'mobile') {\n      jsonData = filterLoad.mobileDataFromFilter\n    }\n    console.log('bottom in loadDestinations') // eslint-disable-line no-console\n    console.log(jsonData) // eslint-disable-line no-console\n    // Change url\n    filterLoad.changeUrl(jsonData)\n\n    var jsonDataAsString = JSON.stringify(jsonData)\n    console.log(jsonDataAsString)\n    // Ajax load (sends request to route('/_load_destinations'))\n    $('.destinations-list-container ul').load($SCRIPT_ROOT + '/_load_destinations', { jsonDataAsString: jsonDataAsString }, function () {\n      // On success\n      currency.fromCookie() // correcting currency after getting in new destinations\n    })\n  }\n\n}\n\n$(document).ready(filterLoad.onReady)\n","var menu = {\n\n  onReady: function () {\n    $('.js-menu-mobile-button').click(function () {\n      $('.js-menu').toggle()\n    })\n\n  }\n\n}\n\n$(document).ready(menu.onReady)\n","var destinationHover = {\n\n  onReady: function () {\n    $('.destination-container').hover(function () {\n      $(this).find('.destination-top').addClass('invisible')\n      $(this).find('.destination-display-on-hover').removeClass('invisible')\n    }, function () {\n      $(this).find('.destination-top').removeClass('invisible')\n      $(this).find('.destination-display-on-hover').addClass('invisible')\n    })\n  }\n}\n$(document).ready(destinationHover.onReady)\n","/* -------------------------------------------------------------------------\n-------\n-------\t\tAdd Destination Page\n-------\t\t- Make main discipline Select input into Buttons\n-------\n---------------------------------------------------------------------------- */\n\nvar selectIntoButtons =  {\n\n\tonReady: function() {\n\n\t\t// Create hidden input to keep track of selected value when replacing Select input\n\t\tselectIntoButtons.init();\n\n\t\t// Replace each option with a button\n\t\t$(\"select#main_discipline option\").unwrap().each(function() {\n\t\t    var btn = $('<div class=\"main-discipline-btn\">'+$(this).text()+'</div>');\n\t\t    //if($(this).is(':checked')) btn.addClass('on');\n\t\t    $(this).replaceWith(btn);\n\t\t});\n\n\t\t// Change value of hidden input when clicking the buttons\n\t\t$(document).on('click', '.main-discipline-btn', function() {\n\t\t    $('.main-discipline-btn').removeClass('on');\n\t\t    $(this).addClass('on');\n\t\t    $('input[name=\"' + selectIntoButtons.selectName + '\"]').val($(this).text().toLowerCase());\n\t\t});\n\t},\n\n\tinit: function() {\n\t\t\n\t\tselectIntoButtons.selectName = $('select#main_discipline').attr('name');\n\n\t\t// add a hidden element with the same name as the select\n\t\tvar hidden = $('<input type=\"hidden\" name=\"' + selectIntoButtons.selectName + '\">');\n\t\thidden.val($('select#main_discipline').val());\n\t\thidden.insertAfter($('select#main_discipline'));\n\t}\n\n};\n$(document).ready( selectIntoButtons.onReady );\n","// Detect objectFit support\nif('objectFit' in document.documentElement.style === false) {\n    // assign HTMLCollection with parents of images with objectFit to variable\n    var container = document.getElementsByClassName('js-destination-bg-polyfill');\n    // Loop through HTMLCollection\n    for(var i = 0; i < container.length; i++) {\n      // Asign image source to variable\n      var imageSource = container[i].querySelector('img').src;\n      // Hide image\n      container[i].querySelector('img').style.display = 'none';\n      // Add background-size: cover\n      container[i].style.backgroundSize = 'cover';\n      // Add background-image: and put image source here\n      container[i].style.backgroundImage = 'url(' + imageSource + ')';\n      // Add background-position: center center\n      container[i].style.backgroundPosition = 'center center';\n    }\n  }\n  "]}